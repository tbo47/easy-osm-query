<html>
  <body>
    <div id="loading">loading...</div>
    <div id="diets"></div>
    <ol id="pois"></ol>
  </body>
  <script src="index.js"></script>
  <script>
    const addToId = (id, c) => {
      document.getElementById(id).innerHTML += c;
    };

    (async () => {
      const { pois, latitude, longitude } = await this.getRestaurantsAroundMe();
      document.getElementById("loading").innerHTML = "";

      const diets = this.extractDiets(pois);

      const dietsHtml = diets
        .map((d) => `<span class="">${d.at(0)} (${d.at(1)})</span>`)
        .join(` | `);
      addToId(`diets`, dietsHtml);

      pois.forEach((poi) => {
        if (!poi.name) return;

        const a = `<a href="${poi.osm_url}" target="${poi.type}">${poi.name}</a>`;

        const w = poi.website
          ? ` | <a href="${poi.website}" target="w">website</a>`
          : ``;

        addToId(`pois`, `<li>${a} ${w} | ${poi.cuisine}</li>`);
      });
    })();
  </script>
</html>
